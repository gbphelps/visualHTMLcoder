!function(t){var e={};function r(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);const a=t=>`rgb(${t[0]},${t[1]},${t[2]})`,i=(t,e,r,a)=>{const i=document.createElement(t);return Object.assign(i,r),e.append(i),a&&Object.assign(i.style,a),i},n=t=>{let e=255*(t-Math.floor(t));switch(Math.floor(t)){case 0:return[255,e,0];case 1:return[255-e,255,0];case 2:return[0,255,e];case 3:return[0,255-e,255];case 4:return[e,0,255];case 5:return[255,0,255-e];case 6:return[255,0,0]}},c=t=>{const e=document.getElementById("canvas"),r=e.getContext("2d");e.color=t;const a=r.createImageData(e.width,e.height);p(a),r.putImageData(a,0,0)},o=t=>t<0?Math.sqrt(3)*(canvas.width/2+t):Math.sqrt(3)*(canvas.width/2-t),s=t=>-t/Math.sqrt(3)+canvas.width/2,d={},l={};let h=!1,g=!1;const u=t=>{const e=Math.floor(t/canvas.width),r=Math.floor(t%canvas.width),a=canvas.height-e,i=r+.5,n=a-.5;let c=Math.atan(n/i);const o=(Math.PI/3-c)/(Math.PI/3);let s=Math.sqrt(i*i+n*n)/canvas.width;return s=s*Math.cos(Math.PI/6-c)/(Math.sqrt(3)/2),l[t]={x:r,y:a,theta:o,r:s},{x:r,y:a,theta:o,r:s}},p=t=>{const[e,r,a]=canvas.color;for(let i=0;i<canvas.height*canvas.width;i++){let n,c,o,s;({x:n,y:c,theta:o,r:s}=g?l[i]:u(i)),t.data[4*i+0]=(e+(255-e)*o)*s,t.data[4*i+1]=(r+(255-r)*o)*s,t.data[4*i+2]=(a+(255-a)*o)*s,t.data[4*i+3]=o<0||o>1||s>1?0:255,h?y(d[i])&&(t.data[4*i+3]=d[i]):m(n-canvas.width/2,c,t,i)}h=!0,g=!0},m=(t,e,r,a)=>{const i=t,n=t+1,c=e,d=e-1,l={};if((i<=s(c)&&s(c)<=n||i<=-s(c)&&-s(c)<=n)&&(l.top=t>0?s(c)-i:-s(c)-i),(i<=s(d)&&s(d)<=n||i<=-s(d)&&-s(d)<=n)&&(l.bottom=t>0?s(d)-i:-s(d)-i),d<=o(i)&&o(i)<=c&&(l.left=o(i)-d),d<=o(n)&&o(n)<=c&&(l.right=o(n)-d),Object.keys(l).length){v(l,t>=0?{x:0,y:0}:{x:1,y:0},r,a,!0)}},y=t=>"number"==typeof t,v=({left:t,right:e,top:r,bottom:a},i,n,c,o)=>{let s;y(t)&&y(e)?s=0===i.y?(t+e)/2:1-(t+e)/2:y(r)&&y(a)?s=0===i.x?(r+a)/2:1-(r+a)/2:y(a)&&y(t)?s=0===i.x&&0===i.y?a*t/2:1-a*t/2:y(a)&&y(e)?s=1===i.x&&0===i.y?(1-a)*e/2:1-(1-a)*e/2:y(r)&&y(t)?s=0===i.x&&1===i.y?r*(1-t)/2:1-r*(1-t)/2:y(r)&&y(e)&&(s=1===i.x&&1===i.y?(1-r)*(1-e)/2:1-(1-r)*(1-e)/2),[t,e,r,a].some(t=>y(t))&&(n.data[4*c+3]=o?255*s:255*(1-s),d[c]=n.data[4*c+3])},M=()=>{const t=dragger2.x,e=canvas.height-dragger2.y;let r=Math.atan(e/t);const i=(Math.PI/3-r)/(Math.PI/3);let n=Math.sqrt(t*t+e*e)/canvas.width;n=n*Math.cos(Math.PI/6-r)/(Math.sqrt(3)/2);let c=Math.round((canvas.color[0]+(255-canvas.color[0])*i)*n)||0,o=Math.round((canvas.color[1]+(255-canvas.color[1])*i)*n)||0,s=Math.round((canvas.color[2]+(255-canvas.color[2])*i)*n)||0;dragger2.color=[c,o,s],pip.style.background=a([c,o,s])},x=()=>{const t=document.getElementById("swatch");t.style.background=a(dragger2.color);const e=dragger2.color.reduce((t,e)=>t+=e)-255;t.style.color=e<382.5?"white":"black",dragger2.color.forEach((t,e)=>{document.getElementById(`color-${e}`).value=t})},b=t=>{t.preventDefault();let[e,r]=[t.clientX,t.clientY];circlePip.style.height="35px",circlePip.style.width="35px",document.body.classList.add("grabbing");const a=t=>{const a=[t.clientX-e,-(t.clientY-r)],i=circleDragger.y*circleDragger.y+circleDragger.x*circleDragger.x,n=[-circleDragger.y,circleDragger.x],c=(a[0]*n[0]+a[1]*n[1])/i;let o,s;const d=(spectrumContainer.width/2-circleSlider.thickness)/2+spectrumContainer.width/4;Math.abs(n[0])>Math.abs(n[1])?(o=circleDragger.x+n[0]*c,s=circleDragger.y>circleDragger.x?Math.sqrt(d*d-o*o):-Math.sqrt(d*d-o*o)):(s=circleDragger.y+n[1]*c,o=-Math.abs(circleDragger.y)<circleDragger.x?Math.sqrt(d*d-s*s):-Math.sqrt(d*d-s*s)),Math.abs(o)>d&&(o=d,s=0),Math.abs(s)>d&&(s=d,o=0),w({x:o,y:s}),e=t.clientX,r=t.clientY};document.addEventListener("mousemove",a),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",a),document.body.classList.remove("grabbing"),circlePip.style.height=circlePip.diameter+"px",circlePip.style.width=circlePip.diameter+"px"},{once:!0})},w=({x:t,y:e})=>{const r=t+spectrumContainer.width/2-circleDragger.diameter/2,i=spectrumContainer.width/2-e-circleDragger.diameter/2;let o;const s=3*(o=t<0?Math.atan(e/t)+Math.PI/2:Math.atan(e/t)+1.5*Math.PI)/Math.PI;circleDragger.x=t,circleDragger.y=e,circleDragger.style.left=r+"px",circleDragger.style.top=i+"px",circlePip.style.background=a(n(s)),c(n(s)),M(),x()},f=({triangleDragger:t,progress:e})=>{if(void 0!==e){const t=(spectrumContainer.width/2-circleSlider.thickness)/2+spectrumContainer.width/4,r=Math.cos(e+Math.PI/2)*t,a=Math.sin(e+Math.PI/2)*t;w({x:r,y:a})}void 0!==t&&(dragger2.x=t.x,dragger2.style.left=dragger2.x-dragger2.diameter/2+"px",dragger2.y=t.y,dragger2.style.top=dragger2.y-dragger2.diameter/2+"px"),M(),x()},D=t=>{t.preventDefault();let e=t.clientX,r=t.clientY;pip.style.width="35px",pip.style.height="35px",pip.style.transform="rotate(90deg)",document.body.classList.add("grabbing");const a=t=>{const a=t.clientX-e,i=t.clientY-r,n=dragger2.x+a,c=dragger2.y+i;canvas.getBoundingClientRect();let o,s;-canvas.height*(2*n/canvas.width-1)>c?Math.abs(i/a)>Math.sqrt(3)?(s=c,o=canvas.width/2*(1-c/canvas.height)):(o=n,s=-canvas.height*(2*n/canvas.width-1)):canvas.height*(2*n/canvas.width-1)>c?Math.abs(i/a)>Math.sqrt(3)?(s=c,o=canvas.width/2*(c/canvas.height+1)):(o=n,s=canvas.height*(2*n/canvas.width-1)):(o=n,s=c),s>canvas.height?s=canvas.height:s<0&&(s=0),o>canvas.width?o=canvas.width:o<0&&(o=0),c<0&&(s=0,o=canvas.width/2),e=t.clientX,r=t.clientY,f({triangleDragger:{x:o,y:s}})};document.addEventListener("mousemove",a),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",a),document.body.classList.remove("grabbing"),pip.style.width=pip.diameter+"px",pip.style.height=pip.diameter+"px",pip.style.transform="rotate(0deg)"},{once:!0})},I=t=>{const e=[];for(let r=0;r<3;r++){const a=document.getElementById(`color-${r}`);let i=+a.value;if(a===t.target&&!(i>=0&&i<=255))return void(a.value=a.last);e.push(i),a.last=i}f((t=>{const e=document.getElementById("canvas");let[r,a,i]=Array.from(t).sort((t,e)=>t-e);const n=r/i,c=255*(a-r)/(i-r);let o=[];i!==r?t.forEach(t=>{switch(t){case i:o.push(255);break;case r:o.push(0);break;default:o.push(c)}}):o=e.color;const s=Math.PI/3-Math.PI/3*n;let d=Math.sqrt(3)*i*e.width/2/255/Math.cos(Math.PI/6-s)/Math.sqrt(1+Math.tan(s)*Math.tan(s)),l=e.height-d*Math.tan(s);return 0===i?(d=0,l=e.height):255===r&&(d=e.width,l=e.height),{triangleDragger:{x:d,y:l},progress:(t=>{let e;return 255===t[0]&&0===t[2]?e=0+t[1]/255:255===t[1]&&0===t[2]?e=2-t[0]/255:255===t[1]&&0===t[0]?e=2+t[2]/255:255===t[2]&&0===t[0]?e=4-t[1]/255:255===t[2]&&0===t[1]?e=4+t[0]/255:255===t[0]&&0===t[1]&&(e=6-t[2]/255),e})(o)*Math.PI/3}})(e))},P=()=>{const t=i("DIV",container,{id:"swatch"},{background:a(canvas.color)}),e=document.createElement("INPUT");e.id="color-0",e.last=255;const r=document.createElement("INPUT");r.last=0,r.id="color-1";const n=document.createElement("INPUT");n.last=0,n.id="color-2",[e,r,n].forEach(t=>{t.setAttribute("size",3),t.addEventListener("input",I),t.addEventListener("focus",t=>t.target.select())});const c=i("DIV",t,{id:"inputContainer"});i("SPAN",c,{innerHTML:"rgb("}),c.append(e),i("SPAN",c,{innerHTML:","}),c.append(r),i("SPAN",c,{innerHTML:","}),c.append(n),i("SPAN",c,{innerHTML:")"})},S=(t,e,r)=>{const a=i("DIV",container,{id:"spectrumContainerOuter",width:t},{background:"linear-gradient(140deg,#333,black)",padding:"20px","border-radius":"50%",height:t+"px",width:t+"px",position:"relative"}),n=i("DIV",a,{id:"spectrumContainer",width:t},{height:t+"px",width:t+"px",position:"relative"}),c=i("CANVAS",n,{id:"circleSlider",height:t,width:t,thickness:e}),o=i("DIV",n,{id:"circleDragger",diameter:r,x:0,y:t/2},{height:r+"px",width:r+"px","border-radius":"50%",position:"absolute",top:(e-r)/2+"px",left:(t-r)/2+"px","z-index":2});i("DIV",o,{id:"circlePip",diameter:17},{height:"17px",width:"17px","border-radius":"50%",background:"rgb(255,0,0)",position:"absolute",left:0,right:0,top:0,bottom:0,margin:"auto",transition:"width .3s, height .3s"});o.addEventListener("mousedown",b);const s=c.getContext("2d").createImageData(t,t),d=C(c.width/2),l=C(c.width/2-e);q(s,{outer:d,inner:l})},E=(t,e,r)=>{t.data[4*e+0]=r[0],t.data[4*e+1]=r[1],t.data[4*e+2]=r[2]},q=(t,e)=>{const r=circleSlider.width/2-circleSlider.thickness;for(let a=0;a<circleSlider.width*circleSlider.width;a++){const i=a%circleSlider.width-circleSlider.width/2,c=i+.5;const o=circleSlider.width-Math.floor(a/circleSlider.width)-circleSlider.width/2,s=o-.5;if(0===i&&0===o)continue;let d=0;d=i<0?(Math.atan(o/i)/Math.PI*2+1)/2*3:(Math.atan(o/i)/Math.PI*2+1)/2*3+3;const l=n(d);E(t,a,l);const h=c*c+s*s;h<=circleSlider.width*circleSlider.width/4&&h>=r*r&&(t.data[4*a+3]=255),L(i,o,e.outer,t,a,!0),L(i,o,e.inner,t,a,!1)}circleSlider.getContext("2d").putImageData(t,0,0)},C=t=>{const e={};for(let r=0;r<circleSlider.width+1;r++){let a=r-circleSlider.width/2,i=Math.sqrt(t*t-a*a);e[a]=i}return e},L=(t,e,r,a,i,n)=>{const c=t,o=t+1,s=e-1,d=e,l={};if((c<=r[d]&&r[d]<=o||c<=-r[d]&&-r[d]<=o)&&(l.top=t>0?r[d]-c:-r[d]-c),(c<=r[s]&&r[s]<=o||c<=-r[s]&&-r[s]<=o)&&(l.bottom=t>0?r[s]-c:-r[s]-c),(s<=r[c]&&r[c]<=d||s<=-r[c]&&-r[c]<=d)&&(l.left=e>0?r[c]-s:-r[c]-s),(s<=r[o]&&r[o]<=d||s<=-r[o]&&-r[o]<=d)&&(l.right=e>0?r[o]-s:-r[o]-s),Object.keys(l).length){const r=((t,e)=>{let r={};return r.x=t>=0?0:1,r.y=e>0?0:1,r})(t,e);O(l,r,a,i,n)}},k=t=>"number"==typeof t,O=({left:t,right:e,top:r,bottom:a},i,n,c,o)=>{let s;k(t)&&k(e)?s=0===i.y?(t+e)/2:1-(t+e)/2:k(r)&&k(a)?s=0===i.x?(r+a)/2:1-(r+a)/2:k(a)&&k(t)?s=0===i.x&&0===i.y?a*t/2:1-a*t/2:k(a)&&k(e)?s=1===i.x&&0===i.y?(1-a)*e/2:1-(1-a)*e/2:k(r)&&k(t)?s=0===i.x&&1===i.y?r*(1-t)/2:1-r*(1-t)/2:k(r)&&k(e)&&(s=1===i.x&&1===i.y?(1-r)*(1-e)/2:1-(1-r)*(1-e)/2),[t,e,r,a].some(t=>k(t))&&(n.data[4*c+3]=o?255*s:255*(1-s))};document.addEventListener("DOMContentLoaded",()=>{Math.round(150*Math.sqrt(3)/2);document.body.style.cursor="default";i("DIV",document.body,{id:"container"},{display:"flex"});S(250,10,50),(t=>{const e=Math.round(t*Math.sqrt(3)/2),r=i("DIV",spectrumContainer,{id:"triangleContainer"},{height:Math.round(t*Math.sqrt(3)/2),width:t,position:"absolute",top:circleSlider.height/2-e+t/(2*Math.sqrt(3))+"px",left:(circleSlider.width-t)/2+"px"}),a=i("CANVAS",r,{id:"canvas",height:Math.round(t*Math.sqrt(3)/2),width:t});c([255,0,0,255]),a.getContext("2d")})(150),(t=>{const e=i("DIV",triangleContainer,{id:"dragger2",diameter:t,x:canvas.width/2,y:0},{height:t+"px",width:t+"px",borderRadius:"50%",left:(canvas.width-t)/2+"px",top:-t/2+"px"});i("DIV",e,{id:"pip",diameter:17},{display:"flex",background:"black",height:"17px",width:"17px","z-index":2,"border-radius":"50%",position:"absolute",top:0,left:0,bottom:0,right:0,margin:"auto",transition:"height .3s , width .3s, transform .3s"}).addEventListener("mousedown",D)})(50),P(),M(),x()})}]);
//# sourceMappingURL=bundle.js.map